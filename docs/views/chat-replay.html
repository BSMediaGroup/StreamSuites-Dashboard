<!-- ========================================================= -->
<!-- StreamSuites — Unified Chat Replay (Preview) -->
<!-- Read-only, informational preview surface -->
<!-- ========================================================= -->

<!-- ========================================================= -->
<!-- HEADER -->
<!-- ========================================================= -->
<header class="ss-header">
  <div class="ss-header-left">
    <h1 class="ss-title">Unified Chat Replay (Preview)</h1>
    <span class="ss-subtitle">Pop-out + OBS previews (scaffolded)</span>
  </div>
  <div class="ss-header-right">
    <span class="ss-badge ss-badge-warning">Scaffolded — Not Live</span>
  </div>
</header>

<!-- ========================================================= -->
<!-- MAIN -->
<!-- ========================================================= -->
<main class="ss-main">

  <section class="ss-panel">
    <header class="ss-panel-header">
      <h2>Preview-only surface</h2>
    </header>

    <div class="ss-panel-body">
      <p>
        The Unified Chat Replay experience is scaffolded for visibility only. These previews
        load local placeholder HTML and do not hydrate from runtime feeds yet.
      </p>
      <p class="muted" style="margin-bottom: 0;">
        There is no resizing logic, no persistence, and no outbound connections. The dashboard
        remains static and read-only.
      </p>
    </div>
  </section>

  <section class="ss-panel">
    <header class="ss-panel-header">
      <div style="display:flex;align-items:center;gap:10px;flex-wrap:wrap;justify-content:space-between;">
        <h2 style="margin:0;">Preview Targets</h2>
        <label style="display:flex;align-items:center;gap:8px;font-weight:600;">
          Theme
          <select id="theme-select" class="ss-input" style="min-width:140px;">
            <option value="default">Default</option>
            <option value="slate">Slate</option>
            <option value="midnight">Midnight</option>
          </select>
        </label>
      </div>
    </header>

    <div class="ss-panel-body">
      <p style="margin-bottom:12px;">
        Avatar visibility is enforced across both previews. The theme selector reloads each frame with
        replay-sourced avatars (or the light-gray fallback silhouette) to confirm consistency.
      </p>
      <div class="ss-grid two-cols" style="display:grid;grid-template-columns:repeat(auto-fit,minmax(320px,1fr));gap:16px;align-items:start;">

        <div class="ss-card" style="background:rgba(255,255,255,0.02);border:1px solid rgba(255,255,255,0.08);border-radius:10px;padding:14px;box-shadow:0 12px 28px rgba(0,0,0,0.28);">
          <div class="ss-panel-header" style="padding:0 0 10px 0;margin:0 0 10px 0;border-bottom:1px solid rgba(255,255,255,0.06);">
            <div style="display:flex;align-items:center;gap:10px;">
              <div style="font-weight:600;letter-spacing:0.02em;">Pop-out Chat Window</div>
              <span class="ss-badge" style="background:rgba(255,255,255,0.08);border:1px solid rgba(255,255,255,0.12);color:#dfe6ff;">Preview</span>
            </div>
            <p class="muted" style="margin:6px 0 0 0;">Embeddable window for local chat playback mock.</p>
          </div>
          <div class="ss-preview-frame" style="background:#0d1220;border:1px solid rgba(255,255,255,0.08);border-radius:8px;overflow:hidden;">
            <iframe
              id="window-preview"
              src="./views/chat_replay_window.html?theme=default"
              title="Pop-out Chat Window Preview"
              style="width:100%;height:360px;border:0;filter:saturate(1);background:#0d1220;"
              loading="lazy"
            ></iframe>
          </div>
        </div>

        <div class="ss-card" style="background:rgba(255,255,255,0.02);border:1px solid rgba(255,255,255,0.08);border-radius:10px;padding:14px;box-shadow:0 12px 28px rgba(0,0,0,0.28);">
          <div class="ss-panel-header" style="padding:0 0 10px 0;margin:0 0 10px 0;border-bottom:1px solid rgba(255,255,255,0.06);">
            <div style="display:flex;align-items:center;gap:10px;">
              <div style="font-weight:600;letter-spacing:0.02em;">OBS / Browser Source Overlay</div>
              <span class="ss-badge" style="background:rgba(255,255,255,0.08);border:1px solid rgba(255,255,255,0.12);color:#dfe6ff;">Preview</span>
            </div>
            <p class="muted" style="margin:6px 0 0 0;">Documentation-grade overlay scaffold for OBS/browser sources.</p>
          </div>
          <div class="ss-preview-frame" style="background:#0d1220;border:1px solid rgba(255,255,255,0.08);border-radius:8px;overflow:hidden;">
            <iframe
              id="overlay-preview"
              src="./views/chat_overlay_obs.html?theme=default"
              title="OBS / Browser Source Overlay Preview"
              style="width:100%;height:360px;border:0;filter:saturate(1);background:#0d1220;"
              loading="lazy"
            ></iframe>
          </div>
        </div>

      </div>
    </div>
  </section>

</main>

<!-- ========================================================= -->
<!-- FOOTER -->
<!-- ========================================================= -->
<footer class="ss-footer">
  <span class="muted">
    Unified Chat Replay previews are scaffolded only; runtime hydration will be added later.
  </span>
</footer>

<script>
  (() => {
    const select = document.getElementById('theme-select');
    const frames = {
      window: {
        el: document.getElementById('window-preview'),
        src: './views/chat_replay_window.html'
      },
      overlay: {
        el: document.getElementById('overlay-preview'),
        src: './views/chat_overlay_obs.html'
      }
    };

    const reloadPreviews = () => {
      const theme = select.value || 'default';
      Object.values(frames).forEach(({ el, src }) => {
        const url = new URL(src, window.location.href);
        url.searchParams.set('theme', theme);
        el.src = url.toString();
      });
    };

    select.addEventListener('change', reloadPreviews);
  })();
</script>
