<!-- ========================================================= -->
<!-- StreamSuites - Analytics (scaffold) -->
<!-- ========================================================= -->

<header class="ss-header">
  <div class="ss-header-left">
    <h1 class="ss-title">Analytics</h1>
    <span class="ss-subtitle">Privacy-safe traffic snapshot (aggregated)</span>
  </div>
  <div class="ss-header-right">
    <label class="muted" for="analytics-window-select">Window</label>
    <select id="analytics-window-select" style="min-width: 110px;">
      <option value="5m" selected>Last 5m</option>
      <option value="15m">Last 15m</option>
      <option value="1h">Last 1h</option>
      <option value="24h">Last 24h</option>
    </select>
    <span id="analytics-status" class="muted">Loading...</span>
  </div>
</header>

<main class="ss-main ss-analytics-main">
  <section class="ss-analytics-banner-wrap">
    <div id="analytics-banner" class="ss-alert ss-alert-danger hidden" role="status" aria-live="polite"></div>
  </section>

  <section class="ss-panel ss-analytics-map-panel">
    <header class="ss-panel-header ss-analytics-map-header">
      <div class="ss-panel-header-main">
        <h2>Global Sessions Map</h2>
        <p class="muted">Country-level request aggregates rendered on a 2D map.</p>
      </div>
      <div class="ss-panel-header-actions ss-analytics-map-header-actions">
        <div class="ss-analytics-map-header-meta" aria-live="polite">
          <span class="ss-analytics-live-pill">
            <span class="ss-analytics-live-dot" aria-hidden="true"></span>
            Live
          </span>
          <span class="ss-analytics-map-updated-label">
            Updated
            <time id="analytics-map-generated-at" datetime="">--</time>
          </span>
        </div>
        <div class="ss-analytics-map-marker-filter" role="group" aria-label="Map marker filter">
          <button
            type="button"
            class="ss-btn ss-btn-secondary ss-btn-small is-active"
            data-map-marker-filter="both"
            aria-pressed="true"
          >
            Both
          </button>
          <button
            type="button"
            class="ss-btn ss-btn-secondary ss-btn-small"
            data-map-marker-filter="sessions"
            aria-pressed="false"
          >
            Sessions only
          </button>
          <button
            type="button"
            class="ss-btn ss-btn-secondary ss-btn-small"
            data-map-marker-filter="requests"
            aria-pressed="false"
          >
            Requests only
          </button>
        </div>
        <button
          id="analytics-map-toggle"
          class="ss-btn ss-btn-secondary ss-btn-small ss-analytics-map-toggle"
          type="button"
          aria-controls="analytics-map-panel-body"
          aria-expanded="true"
        >
          <span class="ss-analytics-map-toggle-icon" aria-hidden="true">&#9660;</span>
          <span id="analytics-map-toggle-label">Collapse</span>
        </button>
      </div>
    </header>
    <div id="analytics-map-panel-body" class="ss-panel-body ss-analytics-map-panel-body">
      <div class="ss-analytics-map-stats-strip" aria-label="Map summary">
        <article class="ss-analytics-map-stat-chip">
          <span class="label">Countries plotted</span>
          <strong id="analytics-map-country-count">0</strong>
        </article>
        <article class="ss-analytics-map-stat-chip">
          <span class="label">Sessions on map</span>
          <strong id="analytics-map-sessions">0</strong>
        </article>
        <article class="ss-analytics-map-stat-chip">
          <span class="label">Top country</span>
          <strong id="analytics-map-top-country">--</strong>
        </article>
      </div>
      <div class="ss-analytics-map-shell">
        <div id="analytics-world-map" class="ss-analytics-map" role="img" aria-label="Global session map"></div>
        <div id="analytics-map-feedback" class="ss-analytics-map-feedback hidden" role="status" aria-live="polite"></div>
      </div>
    </div>
  </section>

  <section class="ss-analytics-lower-grid">
    <aside class="ss-panel ss-analytics-side-panel ss-analytics-countries" aria-labelledby="analytics-countries-title">
      <header class="ss-panel-header">
        <div class="ss-panel-header-main">
          <h2 id="analytics-countries-title">Countries / Regions</h2>
          <p class="muted">Detected regions for the selected analytics window.</p>
        </div>
      </header>
      <div class="ss-panel-body ss-analytics-side-body ss-analytics-countries-body">
        <div class="ss-analytics-countries-toolbar">
          <input
            type="search"
            id="analytics-countries-search"
            class="ss-input"
            placeholder="Filter by country or code"
            aria-label="Filter countries and regions"
          />
          <span id="analytics-countries-count" class="muted">0 regions</span>
        </div>
        <div class="ss-table-scroll ss-analytics-countries-table-wrap">
          <table class="ss-table ss-table-compact" id="analytics-countries-table">
            <thead>
              <tr>
                <th class="sortable" data-sort-key="name" aria-sort="none">Country / Region</th>
                <th class="sortable sorted-desc ss-analytics-num-col" data-sort-key="sessions" aria-sort="descending">Sessions</th>
                <th class="sortable ss-analytics-num-col" data-sort-key="requests" aria-sort="none">Requests</th>
                <th class="sortable ss-analytics-num-col" data-sort-key="sessionsShare" aria-sort="none">Sessions %</th>
                <th class="sortable ss-analytics-num-col" data-sort-key="requestsShare" aria-sort="none">Requests %</th>
              </tr>
            </thead>
            <tbody id="analytics-countries-body"></tbody>
          </table>
        </div>
        <div id="analytics-countries-empty" class="ss-empty-state hidden">No regions detected in this window.</div>
      </div>
    </aside>

    <div class="ss-analytics-side-stack">
      <aside class="ss-panel ss-analytics-side-panel ss-analytics-referrers" aria-labelledby="analytics-referrers-title">
        <header class="ss-panel-header">
          <div class="ss-panel-header-main">
            <h2 id="analytics-referrers-title">Top Referrers</h2>
            <p class="muted">Top inbound domains in the selected window.</p>
          </div>
        </header>
        <div class="ss-panel-body ss-analytics-side-body">
          <ol id="analytics-referrers-list" class="ss-analytics-list" aria-live="polite"></ol>
          <div id="analytics-referrers-empty" class="ss-empty-state hidden">No referrer data yet.</div>
        </div>
      </aside>

      <aside class="ss-panel ss-analytics-side-panel ss-analytics-sessions" aria-labelledby="analytics-sessions-title">
        <header class="ss-panel-header">
          <div class="ss-panel-header-main">
            <h2 id="analytics-sessions-title">Requests Snapshot</h2>
            <p class="muted">Live request summary from runtime analytics aggregates.</p>
          </div>
        </header>
        <div class="ss-panel-body ss-analytics-side-body">
          <div class="ss-analytics-stats">
            <article class="ss-analytics-stat">
              <span class="label">Total requests</span>
              <strong id="analytics-total-requests">--</strong>
            </article>
            <article class="ss-analytics-stat">
              <span class="label">Window</span>
              <strong id="analytics-window-label">--</strong>
            </article>
            <article class="ss-analytics-stat">
              <span class="label">Last updated</span>
              <strong id="analytics-generated-at">--</strong>
            </article>
          </div>
          <div id="analytics-surfaces-wrap" class="ss-analytics-surfaces-wrap">
            <h3 class="ss-analytics-subtitle">Surfaces</h3>
            <ul id="analytics-surfaces-list" class="ss-analytics-list ss-analytics-surfaces-list"></ul>
            <div id="analytics-surfaces-empty" class="ss-empty-state hidden">No events in this window.</div>
          </div>
        </div>
      </aside>
    </div>
  </section>
</main>
